<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Bayan Chat</title>
<style>
body {
  font-family: Verdana, sans-serif;
  background: linear-gradient(180deg,#fff6e5 0%,#f3e0b8 100%);
  margin:0;
  color:#002b5c;
  text-align:center;
}
header {
  background:#003366;
  color:white;
  padding:1rem;
  border-bottom:5px solid gold;
}
#chatBox {
  max-width:600px;
  margin:20px auto;
  background:white;
  border:2px solid gold;
  border-radius:12px;
  padding:10px;
  height:340px;
  overflow-y:auto;
  text-align:left;
}
.msg { margin:6px 0; padding:8px 12px; border-radius:10px; line-height:1.3; }
.user { background:#e3f2fd; border-left:3px solid #1565c0; }
.ai { background:#fff8dc; border-left:3px solid gold; }
#chatInput {
  width:90%;
  max-width:600px;
  height:70px;
  margin-top:10px;
  border-radius:10px;
  border:2px solid #003366;
  padding:8px;
  font-family:inherit;
}
button {
  margin:8px 5px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
#sendBtn { background:#003366; color:white; }
#clearBtn { background:gold; color:#003366; }
#backBtn { background:#00695c; color:white; }
</style>
</head>
<body>
<header>ü§ñ AI Bayan ‚Äî Online Chat</header>

<div id="chatBox">
  <div class="msg ai">AI Bayan: Hello! I'm your English helper. Ask me about grammar or translation üí¨</div>
</div>

<textarea id="chatInput" placeholder="Type your question here..."></textarea><br>
<button id="sendBtn">Ask AI Bayan</button>
<button id="clearBtn">Clear</button>
<button id="backBtn" onclick="window.location.href='index.html'">üè† Back to Home</button>

<script>
/* üåü –í–°–¢–ê–í–¨ –°–í–û–ô API-–ö–õ–Æ–ß –û–¢ OPENAI –°–Æ–î–ê */
const OPENAI_API_KEY = "sk-–í–°–¢–ê–í–¨_–°–í–û–ô_–ö–õ–Æ–ß_–°–Æ–î–ê";
/* ------------------------------------------------ */

async function aiAnswer(prompt) {
  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer " + OPENAI_API_KEY
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [
        { role: "system", content: "You are AI Bayan, a friendly English teacher for kids." },
        { role: "user", content: prompt }
      ]
    })
  });
  const data = await res.json();
  return data.choices?.[0]?.message?.content || "‚ö†Ô∏è No response.";
}

const chat = document.getElementById("chatBox");
const input = document.getElementById("chatInput");
const sendBtn = document.getElementById("sendBtn");
const clearBtn = document.getElementById("clearBtn");

function addMsg(text, who) {
  const div = document.createElement("div");
  div.className = "msg " + who;
  div.textContent = (who === "user" ? "You: " : "AI Bayan: ") + text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

sendBtn.onclick = async () => {
  const q = input.value.trim();
  if(!q) return;
  addMsg(q, "user");
  input.value = "";
  const loading = document.createElement("div");
  loading.className = "msg ai";
  loading.textContent = "AI Bayan is thinking...";
  chat.appendChild(loading);
  chat.scrollTop = chat.scrollHeight;
  try {
    const answer = await aiAnswer(q);
    loading.remove();
    addMsg(answer, "ai");
  } catch(err) {
    loading.remove();
    addMsg("‚ùå Connection error. Check your API key or internet.", "ai");
  }
};

clearBtn.onclick = () => chat.innerHTML = "";
</script>
</body>
</html>
