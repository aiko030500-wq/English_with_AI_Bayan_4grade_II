<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme 1 â€” Letâ€™s Have Fun!</title>
  <style>
    body {
      font-family: Verdana, sans-serif;
      background: linear-gradient(180deg,#fff6e5 0%,#f3e0b8 100%);
      margin: 0;
      color: #002b5c;
      text-align: center;
    }
    header {
      background: linear-gradient(90deg,#003366,#004b99);
      color: white;
      padding: 0.6rem 1rem;
      border-bottom: 5px solid gold;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      width: 55px; height: 55px;
      border-radius: 50%;
      border: 3px solid gold;
      object-fit: cover;
      background: white;
    }
    h2 {color:#003366;}
    section {
      background: white;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 15px;
      max-width: 800px;
      margin: 15px auto;
      text-align: left;
      line-height: 1.5;
      font-size: 0.95rem;
    }
    h3 {
      background: #003366;
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 1rem;
    }
    .btn {
      display:inline-block;
      margin:6px;
      padding:8px 14px;
      border:none;
      border-radius:10px;
      background:#003366;
      color:white;
      font-weight:bold;
      cursor:pointer;
      font-size:0.9rem;
    }
    .btn:hover {background:gold; color:#003366;}
    #resultBox {
      background:#fff3cd;
      border:2px solid gold;
      border-radius:10px;
      padding:10px;
      margin:20px auto;
      max-width:400px;
      text-align:center;
    }
    ul {margin-top:6px;}
    textarea {
      width:100%;
      border-radius:10px;
      border:1px solid #ccc;
      padding:6px;
      font-family:inherit;
      font-size:0.9rem;
    }
    input[type="text"] {
      width:100%;
      max-width:380px;
      border-radius:8px;
      border:1px solid #ccc;
      padding:4px 6px;
      font-family:inherit;
      font-size:0.9rem;
    }
    select {
      border-radius:8px;
      padding:2px 4px;
      font-size:0.9rem;
    }
  </style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:10px;">
    <img src="logo.png" class="logo" alt="AI Bayan logo">
    <div>
      <h1 style="margin:0;font-size:1rem;">Theme 1 â€” Letâ€™s Have Fun!</h1>
      <p style="margin:0;color:#ffea99;">English with AI Bayan</p>
    </div>
  </div>
</header>

<main>
  <h2>ğŸ¨ Letâ€™s Have Fun!</h2>
  <p style="font-style:italic;">Games, hobbies and free time activities</p>

  <!-- VOCABULARY -->
  <section>
    <h3>ğŸ§  VOCABULARY â€” Tick & Match</h3>

    <p><b>1. Tick âœ” your favourite activities:</b></p>
    <form id="tickForm">
      <label><input type="checkbox" value="play games"> play games</label><br>
      <label><input type="checkbox" value="draw pictures"> draw pictures</label><br>
      <label><input type="checkbox" value="ride a bike"> ride a bike</label><br>
      <label><input type="checkbox" value="watch cartoons"> watch cartoons</label><br>
      <label><input type="checkbox" value="listen to music"> listen to music</label><br>
      <label><input type="checkbox" value="read comics"> read comics</label><br>
      <button type="button" class="btn" onclick="checkTick()">Submit âœ…</button>
    </form>
    <p id="tickResult"></p>

    <hr>

    <p><b>2. Match the activities to the pictures (type the letter):</b></p>
    <table style="width:100%;text-align:left;">
      <tr><td>1) ğŸ¨ draw pictures</td><td><input id="m1" placeholder="A/B/C/D" maxlength="1"></td></tr>
      <tr><td>2) âš½ play games / football</td><td><input id="m2" placeholder="A/B/C/D" maxlength="1"></td></tr>
      <tr><td>3) ğŸ§ listen to music</td><td><input id="m3" placeholder="A/B/C/D" maxlength="1"></td></tr>
    </table>
    <p>Pictures:</p>
    <p>A â€“ ğŸ§  B â€“ ğŸ¨  C â€“ âš½  D â€“ ğŸ“º</p>
    <button class="btn" onclick="checkMatch()">Check Matching âœ…</button>
    <p id="matchResult"></p>
  </section>

  <!-- GRAMMAR -->
  <section>
    <h3>ğŸ“˜ GRAMMAR â€” I like / I donâ€™t like</h3>

    <p><b>1. Read the rule:</b></p>
    <p>We use <b>I like</b> + verb + -ing to talk about what we enjoy.</p>
    <p>Example: <br>
      I like playing games. <br>
      I donâ€™t like dancing.
    </p>

    <p><b>2. Choose the correct option:</b></p>
    <p>1) I ___ playing games.</p>
    <label><input type="radio" name="q1" value="like"> like</label><br>
    <label><input type="radio" name="q1" value="likes"> likes</label><br>
    <label><input type="radio" name="q1" value="donâ€™t like"> donâ€™t like</label><br>

    <p>2) She ___ dancing.</p>
    <label><input type="radio" name="q2" value="donâ€™t like"> donâ€™t like</label><br>
    <label><input type="radio" name="q2" value="doesnâ€™t like"> doesnâ€™t like</label><br>
    <label><input type="radio" name="q2" value="like"> like</label><br>

    <p>3) They ___ watching cartoons.</p>
    <label><input type="radio" name="q3" value="likes"> likes</label><br>
    <label><input type="radio" name="q3" value="like"> like</label><br>
    <label><input type="radio" name="q3" value="donâ€™t like"> donâ€™t like</label><br>

    <button class="btn" onclick="checkGrammar()">Check answers âœ…</button>
    <p id="grammarResult"></p>

    <p><b>3. Write your own sentence:</b></p>
    <p>Example: I like listening to music.</p>
    <input id="writeGrammar" type="text" placeholder="Type your sentence here...">
    <button class="btn" onclick="checkWrite()">Submit âœï¸</button>
    <p id="writeResult"></p>
  </section>

  <!-- LISTENING -->
  <section>
    <h3>ğŸ§ LISTENING â€” True or False</h3>

    <p><b>1. Listen to AI Bayan:</b></p>
    <button class="btn" onclick="bayanListening()">â–¶ AI Bayan: listening text</button>

    <details style="margin-top:8px;">
      <summary><b>Text version (for teacher)</b></summary>
      <p>
        Tom: Hi! Iâ€™m Tom. I like playing football and riding my bike.<br>
        Anna: Hello! Iâ€™m Anna. I like drawing and watching cartoons.<br>
        Ben: I donâ€™t like dancing, but I like listening to music.
      </p>
    </details>

    <p><b>2. True or False?</b></p>
    <p>1) Tom likes riding his bike.  
      <select id="t1">
        <option>â€”</option><option>True</option><option>False</option>
      </select>
    </p>
    <p>2) Anna likes playing football.  
      <select id="t2">
        <option>â€”</option><option>True</option><option>False</option>
      </select>
    </p>
    <p>3) Ben likes listening to music.  
      <select id="t3">
        <option>â€”</option><option>True</option><option>False</option>
      </select>
    </p>
    <button class="btn" onclick="checkListening()">Check answers âœ…</button>
    <p id="listenResult"></p>
  </section>

  <!-- READING -->
  <section>
    <h3>ğŸ“– READING â€” After-school fun</h3>

    <p><b>1. Let AI Bayan read:</b></p>
    <button class="btn" onclick="bayanReading()">â–¶ AI Bayan: reading text</button>

    <details style="margin-top:8px;">
      <summary><b>Text</b></summary>
      <p>
        After school, Sam goes home and does his homework.  
        Then he plays games on the computer and listens to music.  
        His sister, Aida, likes drawing pictures and reading comics.  
        In the evening, they watch cartoons together.
      </p>
    </details>

    <p><b>2. Answer the questions:</b></p>
    <ol>
      <li>What does Sam do after school?<br>
        <input id="r1" type="text" placeholder="Your answer..."></li><br>
      <li>What does Aida like doing?<br>
        <input id="r2" type="text" placeholder="Your answer..."></li><br>
      <li>What do they do in the evening?<br>
        <input id="r3" type="text" placeholder="Your answer..."></li>
    </ol>

    <button class="btn" onclick="checkReading()">Check answers âœ…</button>
    <p id="readResult"></p>
  </section>

  <!-- SPEAKING -->
  <section>
    <h3>ğŸ—£ï¸ SPEAKING â€” Talk with AI Bayan</h3>

    <p><b>Questions:</b></p>
    <ul>
      <li>What do you like doing?</li>
      <li>What donâ€™t you like doing?</li>
      <li>What do you do after school?</li>
    </ul>

    <p><b>1. Click and answer aloud:</b></p>
    <button class="btn" onclick="startSpeak()">ğŸ™ Start recording</button>
    <button class="btn" onclick="stopSpeak()">â¹ Stop</button>
    <p id="speechResult"></p>
  </section>

  <!-- WRITING -->
  <section>
    <h3>âœï¸ WRITING â€” Dictation</h3>

    <p><b>1. Listen to AI Bayan saying the words.</b></p>
    <button class="btn" onclick="bayanWords()">â–¶ AI Bayan: words</button>

    <details style="margin-top:8px;">
      <summary><b>Word list (for teacher)</b></summary>
      <ul>
        <li>play games</li>
        <li>ride my bike</li>
        <li>draw pictures</li>
        <li>watch cartoons</li>
        <li>listen to music</li>
      </ul>
    </details>

    <hr>

    <p><b>2. Listen to the short text and write it.</b></p>
    <button class="btn" onclick="bayanDictation()">â–¶ AI Bayan: dictation text</button>

    <details style="margin-top:8px;">
      <summary><b>Text (for teacher)</b></summary>
      <p>
        After school I play games and listen to music.  
        At the weekend I ride my bike and watch cartoons.  
        I donâ€™t like dancing but I like drawing pictures.
      </p>
    </details>

    <p><b>3. Type what you heard:</b></p>
    <textarea id="writeBox" rows="5" placeholder="Type here..."></textarea><br>
    <button class="btn" onclick="checkDictation()">Check âœ…</button>
    <p id="writeFeedback"></p>
  </section>

  <!-- RESULT -->
  <div id="resultBox">
    <h3>ğŸ¯ Lesson Complete</h3>
    <p id="starsText">You have 0 â­ in this lesson.</p>
    <button class="btn" onclick="finishLesson()">Finish Lesson</button>
  </div>

  <div style="margin-top:16px;">
    <button class="btn" onclick="goBack()">â¬… Back</button>
    <button class="btn" onclick="goMenu()">ğŸ  Menu</button>
    <button class="btn" onclick="goNext()">Next â¡ï¸</button>
  </div>
  <p style="font-size:0.8rem;color:#444;margin-top:10px;">Created by Bayan team</p>
</main>

<script>
  // GLOBAL STARS
  let stars = 0;
  function updateStarsText(){
    document.getElementById('starsText').innerText =
      "You have " + stars + " â­ in this lesson.";
  }

  // VOCABULARY
  function checkTick(){
    const boxes = document.querySelectorAll('#tickForm input[type="checkbox"]:checked');
    if(boxes.length > 0){
      stars++;
      document.getElementById('tickResult').innerText =
        "Nice! You chose " + boxes.length + " activities. â­ +1!";
      updateStarsText();
    } else {
      document.getElementById('tickResult').innerText = "Please tick at least one activity.";
    }
  }

  function checkMatch(){
    let score = 0;
    if(document.getElementById('m1').value.toUpperCase() === 'B') score++;
    if(document.getElementById('m2').value.toUpperCase() === 'C') score++;
    if(document.getElementById('m3').value.toUpperCase() === 'A') score++;

    if(score === 3){
      stars++;
      document.getElementById('matchResult').innerText =
        "Perfect! All correct â­ +1! Total stars: " + stars;
      updateStarsText();
    } else {
      document.getElementById('matchResult').innerText =
        "You got " + score + "/3 correct. Try again.";
    }
  }

  // GRAMMAR
  function checkGrammar(){
    let score = 0;
    const q1 = document.querySelector('input[name="q1"]:checked');
    const q2 = document.querySelector('input[name="q2"]:checked');
    const q3 = document.querySelector('input[name="q3"]:checked');

    if(q1 && q1.value === "like") score++;
    if(q2 && q2.value === "doesnâ€™t like") score++;
    if(q3 && q3.value === "like") score++;

    if(score === 3){
      stars++;
      document.getElementById("grammarResult").innerText =
        "Perfect! All correct â­ +1! Total stars: " + stars;
      updateStarsText();
    } else {
      document.getElementById("grammarResult").innerText =
        "You got " + score + "/3 correct. Try again.";
    }
  }

  function checkWrite(){
    const ans = document.getElementById("writeGrammar").value.toLowerCase();
    if(ans.includes("like") && ans.includes("ing")){
      stars++;
      document.getElementById("writeResult").innerText =
        "Great! Your sentence looks correct â­ +1!";
      updateStarsText();
    } else {
      document.getElementById("writeResult").innerText =
        "Try to use â€œI like ...-ingâ€.";
    }
  }

  // LISTENING (T/F)
  function checkListening(){
    let score = 0;
    if(document.getElementById('t1').value === 'True') score++;
    if(document.getElementById('t2').value === 'False') score++;
    if(document.getElementById('t3').value === 'True') score++;

    if(score === 3){
      stars++;
      document.getElementById('listenResult').innerText =
        "Excellent! All correct â­ +1! Total stars: " + stars;
      updateStarsText();
    } else {
      document.getElementById('listenResult').innerText =
        "You got " + score + "/3 correct. Try again.";
    }
  }

  // READING (short answers)
  function checkReading(){
    let score = 0;
    const a1 = document.getElementById('r1').value.toLowerCase();
    const a2 = document.getElementById('r2').value.toLowerCase();
    const a3 = document.getElementById('r3').value.toLowerCase();

    if(a1.includes("homework") || a1.includes("plays games") || a1.includes("play games")) score++;
    if(a2.includes("drawing") || a2.includes("pictures") || a2.includes("reading")) score++;
    if(a3.includes("watch") || a3.includes("cartoon")) score++;

    if(score === 3){
      stars++;
      document.getElementById('readResult').innerText =
        "Perfect! All correct â­ +1! Total stars: " + stars;
      updateStarsText();
    } else {
      document.getElementById('readResult').innerText =
        "You got " + score + "/3 correct. Try again.";
    }
  }

  // SPEAKING (speech recognition)
  let recognition;
  function startSpeak(){
    if(!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
      alert("Speech recognition is not supported in this browser.");
      return;
    }
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SR();
    recognition.lang = "en-US";
    recognition.onresult = function(event){
      const speech = event.results[0][0].transcript.toLowerCase();
      let msg = "You said: " + speech;
      if(speech.includes("like") || speech.includes("play") || speech.includes("games")){
        stars++;
        msg += "\nâ­ Great! +1 star!";
        updateStarsText();
      } else {
        msg += "\nTry to say: â€œI like ...â€";
      }
      document.getElementById("speechResult").innerText = msg;
    };
    recognition.start();
  }
  function stopSpeak(){
    if(recognition){ recognition.stop(); }
  }

  // WRITING (dictation check)
  function checkDictation(){
    const text = document.getElementById("writeBox").value.toLowerCase();
    const keywords = ["play", "games", "listen", "music", "bike", "cartoons", "drawing"];
    let found = 0;
    for(const w of keywords){
      if(text.includes(w)) found++;
    }

    if(found >= 6){
      stars++;
      document.getElementById("writeFeedback").innerText =
        "Excellent! You wrote almost everything correctly â­ +1! Total stars: " + stars;
      updateStarsText();
    } else if(found >= 4){
      document.getElementById("writeFeedback").innerText =
        "Good! You got many words right (" + found + "/7). Try to add the missing ones.";
    } else {
      document.getElementById("writeFeedback").innerText =
        "Listen again and try to include all key words.";
    }
  }

  // AI Bayan voice (TTS) helpers
  function speak(text){
    if(!('speechSynthesis' in window)){
      alert("Speech synthesis is not supported in this browser.");
      return;
    }
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";
    window.speechSynthesis.speak(utter);
  }

  function bayanListening(){
    const t = "Tom: Hi, I am Tom. I like playing football and riding my bike. " +
              "Anna: Hello, I am Anna. I like drawing and watching cartoons. " +
              "Ben: I do not like dancing, but I like listening to music.";
    speak(t);
  }

  function bayanReading(){
    const t = "After school, Sam goes home and does his homework. " +
              "Then he plays games on the computer and listens to music. " +
              "His sister, Aida, likes drawing pictures and reading comics. " +
              "In the evening, they watch cartoons together.";
    speak(t);
  }

  function bayanWords(){
    const t = "play games, ride my bike, draw pictures, watch cartoons, listen to music.";
    speak(t);
  }

  function bayanDictation(){
    const t = "After school I play games and listen to music. " +
              "At the weekend I ride my bike and watch cartoons. " +
              "I do not like dancing, but I like drawing pictures.";
    speak(t);
  }

  // FINISH + NAVIGATION
  function finishLesson(){
    localStorage.setItem("lesson1Stars", stars);
    alert("ğŸ‰ Great job! You got " + stars + "â­ in this lesson!");
  }
  function goBack(){window.location.href="index.html";}
  function goMenu(){window.location.href="index.html";}
  function goNext(){window.location.href="theme2.html";}

  // init
  updateStarsText();
</script>
</body>
</html>
