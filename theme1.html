<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Theme 1 ‚Äì Let‚Äôs Have Fun! | English with AI Bayan</title>
<style>
  body {
    font-family: Verdana, sans-serif;
    /* —Ä–æ–∑–æ–≤–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ñ–æ–Ω */
    background: linear-gradient(180deg,#ffeaf3 0%,#efd6f7 100%);
    margin: 0;
    color: #002b5c;
    text-align: center;
  }
  header {
    background: #7b3fa3;
    color: white;
    padding: 0.8rem;
    border-bottom: 4px solid gold;
  }
  main {
    padding: 1rem;
    max-width: 900px;
    margin: 0 auto;
  }
  h1 {
    margin: 0;
    font-size: 1.3rem;
  }
  .subtitle {
    font-size: 0.9rem;
    margin-top: 4px;
    opacity: 0.9;
  }
  .info-bar {
    margin: 10px auto 14px;
    padding: 8px 12px;
    background: rgba(255,255,255,0.8);
    border-radius: 12px;
    border: 2px solid #f2c8ff;
    font-size: 0.9rem;
    display: flex;
    justify-content: space-between;
    gap: 8px;
  }
  .info-bar div {
    flex: 1;
  }

  .task {
    background: #ffffff;
    border-radius: 16px;
    padding: 14px;
    margin: 10px auto;
    box-shadow: 0 0 8px rgba(0,0,0,0.08);
    text-align: left;
  }
  .task h2 {
    margin-top: 0;
    font-size: 1.1rem;
    border-bottom: 2px solid #f2d4ff;
    padding-bottom: 4px;
  }
  .task p {
    margin: 6px 0;
    font-size: 0.95rem;
  }
  .btn {
    display: inline-block;
    margin: 6px 4px;
    padding: 6px 12px;
    border-radius: 10px;
    border: none;
    background: #7b3fa3;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    font-size: 0.85rem;
  }
  .btn:hover {
    background: gold;
    color: #7b3fa3;
  }
  select, input[type="text"], textarea {
    font-family: inherit;
    font-size: 0.9rem;
    padding: 4px 6px;
    border-radius: 8px;
    border: 1px solid #ccc;
    margin-top: 4px;
    width: 100%;
    box-sizing: border-box;
  }
  textarea {
    min-height: 60px;
    resize: vertical;
  }
  .feedback {
    min-height: 24px;
    margin-top: 6px;
  }
  .nav-bar {
    margin-top: 16px;
  }
</style>
</head>
<body>

<header>
  <h1>Theme 1 ‚Äì Let‚Äôs Have Fun!</h1>
  <div class="subtitle">English with AI Bayan 4grade II (ONLINE)</div>
</header>

<main>
  <!-- –ò–Ω—Ñ–æ-–ø–∞–Ω–µ–ª—å: –∏–º—è + –∑–≤–µ–∑–¥—ã -->
  <div class="info-bar">
    <div><b>Student:</b> <span id="studentName">‚Äì</span></div>
    <div><b>Lesson 1 stars:</b> <span id="lessonStars">0</span> ‚≠ê</div>
  </div>

  <!-- üß† VOCABULARY -->
  <section class="task">
    <h2>üß† Vocabulary ‚Äì Guess the word</h2>
    <p><b>1.</b> What is ‚Äú–≤–æ–ª–µ–π–±–æ–ª‚Äù in English?</p>
    <select id="voc1">
      <option value="">-- choose --</option>
      <option value="basketball">basketball</option>
      <option value="volleyball">volleyball</option>
      <option value="football">football</option>
    </select>
    <button class="btn" onclick="checkVoc1()">Check</button>
    <button class="btn" onclick="bayanSpeak('volleyball')">üîä Say it</button>
    <div id="voc1Feedback" class="feedback"></div>

    <p><b>2.</b> What is ‚Äú–∏–≥—Ä–∞—Ç—å –≤ –ø—Ä—è—Ç–∫–∏‚Äù in English?</p>
    <select id="voc2">
      <option value="">-- choose --</option>
      <option value="play tag">play tag</option>
      <option value="play hide-and-seek">play hide-and-seek</option>
      <option value="go fishing">go fishing</option>
    </select>
    <button class="btn" onclick="checkVoc2()">Check</button>
    <button class="btn" onclick="bayanSpeak('play hide and seek')">üîä Say it</button>
    <div id="voc2Feedback" class="feedback"></div>
  </section>

  <!-- üìò GRAMMAR -->
  <section class="task">
    <h2>üìò Grammar ‚Äì Present Simple</h2>
    <p><b>1.</b> He ___ football on Sundays.</p>
    <select id="gr1">
      <option value="">-- choose --</option>
      <option value="play">play</option>
      <option value="plays">plays</option>
    </select>
    <button class="btn" onclick="checkGr1()">Check</button>
    <div id="gr1Feedback" class="feedback"></div>

    <p><b>2.</b> They ___ like playing tag.</p>
    <select id="gr2">
      <option value="">-- choose --</option>
      <option value="don‚Äôt">don‚Äôt</option>
      <option value="doesn‚Äôt">doesn‚Äôt</option>
    </select>
    <button class="btn" onclick="checkGr2()">Check</button>
    <div id="gr2Feedback" class="feedback"></div>
  </section>

  <!-- üéß LISTENING -->
  <section class="task">
    <h2>üéß Listening ‚Äì True or False</h2>
    <p>Click <b>Play</b>, listen and choose.</p>
    <button class="btn" onclick="playListening()">
      üîä Play text
    </button>

    <p style="margin-top:8px;"><b>Text:</b> (for teacher)  
      ‚ÄúOn Sunday, Jill walks in the park. Andy plays with a ball. Bob goes fishing in the lake.‚Äù</p>

    <p><b>1.</b> Jill walks in the park. (T / F)</p>
    <select id="lis1">
      <option value="">-- choose --</option>
      <option value="T">True</option>
      <option value="F">False</option>
    </select>
    <button class="btn" onclick="checkLis1()">Check</button>
    <div id="lis1Feedback" class="feedback"></div>

    <p><b>2.</b> Bob plays volleyball in the lake. (T / F)</p>
    <select id="lis2">
      <option value="">-- choose --</option>
      <option value="T">True</option>
      <option value="F">False</option>
    </select>
    <button class="btn" onclick="checkLis2()">Check</button>
    <div id="lis2Feedback" class="feedback"></div>
  </section>

  <!-- üìñ READING -->
  <section class="task">
    <h2>üìñ Reading ‚Äì Danial‚Äôs day</h2>
    <p><b>Read the text:</b></p>
    <p style="background:#fff6ff;border-radius:10px;padding:8px;font-size:0.9rem;">
      Dear Arsen,<br>
      I‚Äôm Danial. I‚Äôm ten years old. I get up at seven o‚Äôclock. I go to school in the morning. 
      In the afternoon I do my homework and play the guitar. In the evening I watch TV and read. 
      I go to bed at nine o‚Äôclock.<br>
      Bye, Danial.
    </p>

    <p><b>Question:</b> How old is Danial?</p>
    <input type="text" id="read1" placeholder="Type your answer in English">
    <button class="btn" onclick="checkRead1()">Check</button>
    <div id="read1Feedback" class="feedback"></div>
  </section>

  <!-- üó£Ô∏è SPEAKING -->
  <section class="task">
    <h2>üó£Ô∏è Speaking ‚Äì Talk about you</h2>
    <p>Click on <b>Play question</b> and answer aloud:</p>
    <button class="btn" onclick="bayanSpeak('Do you play games on your birthday? What games do you play?')">
      üîä Play question
    </button>
    <p style="font-size:0.9rem;margin-top:6px;">
      (Teacher checks speaking. Stars –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é.) 
    </p>
  </section>

  <!-- ‚úçÔ∏è WRITING -->
  <section class="task">
    <h2>‚úçÔ∏è Writing ‚Äì My fun day</h2>
    <p>Write 2‚Äì3 sentences about your fun day in English.</p>
    <p style="font-size:0.9rem;">Example: <i>I play tag with my friends. I fly a kite in the park.</i></p>
    <textarea id="write1" placeholder="Write here..."></textarea>
    <button class="btn" onclick="checkWriting()">Check & get a star</button>
    <div id="write1Feedback" class="feedback"></div>
  </section>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <div class="nav-bar">
    <button class="btn" onclick="goBack()">‚¨Ö Back to Menu</button>
    <button class="btn" onclick="goNext()">‚û° Next Lesson</button>
  </div>
</main>

<!-- ‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è ‚úÖ ‚ùå –∏ ‚≠ê -->
<style>
@keyframes pop {
  0% { transform: scale(0.2); opacity: 0; }
  60% { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); opacity: 0.9; }
}
@keyframes starSpin {
  0% { transform: scale(0.5) rotate(0deg); opacity: 0; }
  50% { transform: scale(1.3) rotate(20deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 0; }
}
.feedback-icon {
  font-size: 2rem;
  display: inline-block;
  animation: pop 0.5s ease-out;
}
.star {
  display: inline-block;
  font-size: 1.8rem;
  color: gold;
  margin-left: 5px;
  animation: starSpin 0.8s ease-out;
}
</style>

<script>
// ====== –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ======
let lessonStars = 0;
let currentStudent = null;

// –∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener("DOMContentLoaded", () => {
  currentStudent = localStorage.getItem("currentStudent") || null;
  if(currentStudent){
    document.getElementById("studentName").innerText = currentStudent;
    const saved = Number(localStorage.getItem(currentStudent+"_lesson1Stars")) || 0;
    lessonStars = saved;
    document.getElementById("lessonStars").innerText = lessonStars;
  }
});

// –¥–æ–±–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
function addStar() {
  if(!currentStudent) return;
  lessonStars++;
  document.getElementById("lessonStars").innerText = lessonStars;
  localStorage.setItem(currentStudent+"_lesson1Stars", lessonStars);
}

// ‚úÖ / ‚ùå + ‚≠ê
function showAnswerFeedback(isCorrect, elementId) {
  const el = document.getElementById(elementId);
  if (!el) return;
  el.innerHTML = "";
  const icon = document.createElement("span");
  icon.className = "feedback-icon";
  icon.textContent = isCorrect ? "‚úÖ" : "‚ùå";
  icon.style.color = isCorrect ? "green" : "red";
  el.appendChild(icon);

  if (isCorrect) {
    const star = document.createElement("span");
    star.className = "star";
    star.textContent = "‚≠ê";
    el.appendChild(star);
    addStar();
  }

  setTimeout(() => { el.innerHTML = ""; }, 1500);
}

// üéôÔ∏è –º—è–≥–∫–∏–π –≥–æ–ª–æ—Å AI Bayan
function bayanSpeak(text){
  const speakNow = () => {
    const voices = speechSynthesis.getVoices();
    let voice = voices.find(v =>
      v.name.includes("Google UK English Female") ||
      v.name.includes("Microsoft Sonia Online") ||
      v.lang === "en-GB"
    );
    if(!voice) voice = voices[0];

    const utter = new SpeechSynthesisUtterance(text);
    utter.voice  = voice;
    utter.lang   = "en-GB";
    utter.rate   = 0.9;
    utter.pitch  = 1.0;
    utter.volume = 1.0;
    speechSynthesis.speak(utter);
  };

  if(speechSynthesis.getVoices().length === 0){
    speechSynthesis.onvoiceschanged = speakNow;
  } else {
    speakNow();
  }
}

// ====== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞–Ω–∏–π ======

// Vocabulary 1
function checkVoc1(){
  const v = document.getElementById("voc1").value;
  if(v === "volleyball"){
    showAnswerFeedback(true, "voc1Feedback");
    bayanSpeak("Volleyball. Well done!");
  } else {
    showAnswerFeedback(false, "voc1Feedback");
    bayanSpeak("Not quite. Try again.");
  }
}
// Vocabulary 2
function checkVoc2(){
  const v = document.getElementById("voc2").value;
  if(v === "play hide-and-seek"){
    showAnswerFeedback(true, "voc2Feedback");
    bayanSpeak("Play hide and seek. Excellent!");
  } else {
    showAnswerFeedback(false, "voc2Feedback");
    bayanSpeak("Not correct. Try again.");
  }
}

// Grammar 1
function checkGr1(){
  const v = document.getElementById("gr1").value;
  if(v === "plays"){
    showAnswerFeedback(true, "gr1Feedback");
    bayanSpeak("He plays football on Sundays.");
  } else {
    showAnswerFeedback(false, "gr1Feedback");
    bayanSpeak("Remember: He plays with S.");
  }
}

// Grammar 2
function checkGr2(){
  const v = document.getElementById("gr2").value;
  if(v === "don‚Äôt"){
    showAnswerFeedback(true, "gr2Feedback");
    bayanSpeak("They don't like playing tag.");
  } else {
    showAnswerFeedback(false, "gr2Feedback");
    bayanSpeak("We use don't with they.");
  }
}

// Listening ‚Äì play text
function playListening(){
  bayanSpeak("On Sunday, Jill walks in the park. Andy plays with a ball. Bob goes fishing in the lake.");
}

// Listening 1
function checkLis1(){
  const v = document.getElementById("lis1").value;
  if(v === "T"){
    showAnswerFeedback(true, "lis1Feedback");
    bayanSpeak("Correct. Jill walks in the park.");
  } else {
    showAnswerFeedback(false, "lis1Feedback");
    bayanSpeak("Listen again. Jill walks in the park.");
  }
}

// Listening 2
function checkLis2(){
  const v = document.getElementById("lis2").value;
  // —Ñ—Ä–∞–∑–∞ –Ω–µ–≤–µ—Ä–Ω–∞—è -> –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç F
  if(v === "F"){
    showAnswerFeedback(true, "lis2Feedback");
    bayanSpeak("Correct. Bob goes fishing, he does not play volleyball.");
  } else {
    showAnswerFeedback(false, "lis2Feedback");
    bayanSpeak("Listen again. Bob goes fishing.");
  }
}

// Reading
function checkRead1(){
  const ans = document.getElementById("read1").value.trim().toLowerCase();
  // –¥–æ–ø—É—Å—Ç–∏–º: "he is ten", "ten", "he is ten years old"
  if(ans.includes("ten")){
    showAnswerFeedback(true, "read1Feedback");
    bayanSpeak("Correct. He is ten years old.");
  } else {
    showAnswerFeedback(false, "read1Feedback");
    bayanSpeak("Read again. He is ten years old.");
  }
}

// Writing ‚Äì –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç –Ω–µ –ø—É—Å—Ç–æ–π –∏ —Ö–æ—Ç—è –±—ã 5 —Å–∏–º–≤–æ–ª–æ–≤
function checkWriting(){
  const txt = document.getElementById("write1").value.trim();
  if(txt.length >= 5){
    showAnswerFeedback(true, "write1Feedback");
    bayanSpeak("Great! Thank you for your writing.");
  } else {
    showAnswerFeedback(false, "write1Feedback");
    bayanSpeak("Please write at least one sentence.");
  }
}

// –ù–∞–≤–∏–≥–∞—Ü–∏—è
function goBack(){
  window.location.href = "index.html";
}
function goNext(){
  window.location.href = "theme2.html";
}
</script>

</body>
</html>
